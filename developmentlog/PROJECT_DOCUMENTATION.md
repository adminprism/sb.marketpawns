# Market Pawns - Документация проекта

## Общее описание

Market Pawns - это веб-приложение для анализа и визуализации рыночных данных с использованием специальных алгоритмов и моделей. Платформа предназначена для трейдеров и аналитиков рынка, позволяя им визуализировать, анализировать и прогнозировать движения рынка на основе свечных графиков и специализированных моделей.

## Структура проекта

### Основные директории

- **css/** - стили оформления приложения
- **js/** - клиентские JavaScript файлы
- **includes/** - общие PHP-включения и конфигурации
- **src/** - основные компоненты логики приложения
- **developmentlog/** - документация и журнал изменений
- **infobase/** - информационная база для моделей
- **logs/** - журналы работы приложения
- **saved_charts/** - сохраненные графики и модели

### Ключевые файлы

- **index.php** - главная страница приложения с интерфейсом графиков
- **calc_controls.php** - управление расчетами моделей
- **inc_calc_controls.php** - включаемые элементы управления расчетами
- **build_models_A1.php** - построение моделей по алгоритму А1
- **build_models_A2.php** - построение моделей по алгоритму А2
- **js/main.js** - основная клиентская логика приложения
- **js/drawModels.js** - функции для отображения моделей на графиках
- **src/build_models_common.php** - общие функции для построения моделей

## Функциональность

### Основные возможности

1. **Визуализация графиков**
   - Отображение свечных графиков для различных торговых инструментов
   - Масштабирование и навигация по графику
   - Отображение информации о выбранных свечах

2. **Построение моделей**
   - Анализ графиков с использованием алгоритма А1
   - Анализ графиков с использованием алгоритма А2
   - Визуализация обнаруженных моделей на графике

3. **Расчет торговых возможностей**
   - Идентификация ключевых точек и уровней
   - Расчет потенциальных целей и уровней риска
   - Оценка вероятности развития различных сценариев

4. **Работа с различными источниками данных**
   - FOREX (Finam)
   - Alpari
   - Локальная база данных MySQL

### Интерфейс пользователя

Интерфейс разделен на несколько функциональных блоков:

1. **Заголовок и навигация**
   - Логотип и основная навигация по разделам

2. **Панель контроля**
   - Выбор источника данных (FOREX, Alpari, MySQL)
   - Выбор торгового инструмента (валютные пары)
   - Выбор временного интервала (1м, 5м, 15м, 1ч и т.д.)

3. **Параметры расчета**
   - Выбор режима расчета (все модели, последние, выбранный бар)
   - Настройка алгоритмов и моделей
   - Дополнительные параметры анализа

4. **Основной график**
   - Свечной график с возможностью масштабирования
   - Визуализация моделей и ключевых точек
   - Информация о выбранных объектах

5. **Панель результатов**
   - Детальная информация о выбранных моделях
   - Статистика и вероятности
   - Рекомендации по торговым решениям

## Технический стек

### Frontend

- **HTML/CSS/JavaScript**
- **jQuery** - для DOM-манипуляций и AJAX-запросов
- **Canvas API** - для отрисовки графиков
- **Font Awesome** - для иконок интерфейса

### Backend

- **PHP** - серверная логика и обработка данных
- **MySQL** - хранение исторических данных и результатов анализа

## Рабочий процесс

1. **Загрузка данных**
   - Выбор источника данных, инструмента и временного интервала
   - Запрос исторических данных через AJAX

2. **Построение графика**
   - Отрисовка свечного графика на Canvas
   - Добавление навигационных элементов

3. **Анализ данных**
   - Запуск выбранного алгоритма анализа (А1 или А2)
   - Обработка результатов и выявление моделей

4. **Визуализация результатов**
   - Отображение моделей поверх графика
   - Отображение ключевых точек и уровней
   - Предоставление детальной информации о моделях

5. **Взаимодействие с пользователем**
   - Навигация между моделями
   - Получение детальной информации о выбранных элементах
   - Настройка параметров анализа

## Алгоритмы анализа

### Алгоритм А1

Основной алгоритм для поиска базовых моделей, включает:
- Идентификацию ключевых точек (t1, t2, t3, t4, t5)
- Определение отношений между точками
- Классификацию моделей по их характеристикам

### Алгоритм А2

Расширенный алгоритм для поиска сложных моделей, включает:
- Анализ связей между базовыми моделями
- Определение дополнительных точек (t2', t3', t5' и т.д.)
- Расчет вероятностных характеристик моделей

## Процесс разработки

Текущий процесс разработки документируется в директории `developmentlog/` и включает:
- **CHANGELOG.md** - история изменений
- **debug_fixes.md** - исправления ошибок
- **README.md** - общая информация о документации

## Будущие улучшения

Планируется реализация следующих улучшений:
- Дальнейшая оптимизация для мобильных устройств
- Улучшение доступности (accessibility) интерфейса
- Реализация темной темы оформления
- Расширение аналитических возможностей
- Добавление новых источников данных 